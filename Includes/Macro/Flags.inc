                ifndef _MACRO_FLAGS_
                define _MACRO_FLAGS_
; -----------------------------------------
; проверка флага
; In:
;   HL - адрес хранения флагов
; Out:
; Corrupt:
; -----------------------------------------
CHECK_FLAG      macro FlagBit?
                BIT FlagBit?, (HL)
                endm
; -----------------------------------------
; проверка флага
; In:
;   A  - значения флагов
; Out:
; Corrupt:
; -----------------------------------------
CHECK_FLAG_A    macro FlagBit?
                BIT FlagBit?, A
                endm
; -----------------------------------------
; установка флага
; In:
;   HL - адрес хранения флагов
; Out:
; Corrupt:
; -----------------------------------------
SET_FLAG        macro FlagBit?
                SET FlagBit?, (HL)
                endm
; -----------------------------------------
; установка флагов
; In:
;   HL - адрес хранения флагов
; Out:
; Corrupt:
; -----------------------------------------
SET_FLAGS       macro Flags?
                LD (HL), Flags?
                endm
; -----------------------------------------
; установка флагов
; In:
;   HL - адрес хранения флагов
; Out:
;   AF
; Corrupt:
; -----------------------------------------
SET_OR_FLAGS    macro Flags?
                LD A, Flags?
                OR (HL)
                LD (HL), A
                endm
; -----------------------------------------
; сброс флага
; In:
;   HL - адрес хранения флагов
; Out:
; Corrupt:
; -----------------------------------------
RES_FLAG        macro FlagBit?
                RES FlagBit?, (HL)
                endm
; -----------------------------------------
; сброс флагов
; In:
;   HL - адрес хранения флагов
; Out:
;   AF
; Corrupt:
; -----------------------------------------
RES_FLAGS       macro Flags?
                LD A, (HL)
                AND (~Flags?) & 0xFF
                LD (HL), A
                endm
; -----------------------------------------
; сброс всех флагов
; In:
;   HL - адрес хранения флагов
; Out:
; Corrupt:
; -----------------------------------------
RES_ALL         macro
                LD (HL), #00
                endm
; -----------------------------------------
; поменять флаг
; In:
;   HL - адрес хранения флагов
; Out:
; Corrupt:
; -----------------------------------------
SWAP_FLAG       macro FlagBit?
                LD A, 1 << FlagBit?
                XOR (HL)
                LD (HL), A
                endm
; -----------------------------------------
; проверка флагов
; In:
;   A - значение флагов
; Out:
; Corrupt:
; -----------------------------------------
CHECK_FLAGS     macro Flags?
                AND Flags?
                endm
; -----------------------------------------
; изъятие флага
; In:
;   HL - адрес хранения флагов
; Out:
; Corrupt:
; -----------------------------------------
POP_FLAG        macro FlagBit?
                CHECK_FLAG FlagBit?
                JR Z, .Next
                RES_FLAG FlagBit?
.Next           ;
                endm

                endif ; ~_MACRO_FLAGS_
